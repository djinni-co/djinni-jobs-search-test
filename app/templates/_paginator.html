<nav aria-label="Page navigation">
    <ul class="pagination">
        {% with request.GET.urlencode as query_string %}

        {% if current_page > 1 %}
        <!-- "First" Button -->
            <li class="page-item">
                <a class="page-link" href="?{{ query_string }}&page=1"><<</a>
            </li>
        <!-- "Previous" Button -->
            <li class="page-item">
                <a class="page-link" href="?{{ query_string }}&page={{ current_page|add:-1 }}"><</a>
            </li>
        {% endif %}

        <!-- "..." Button -->
        {% if current_page > 4 %}
            <li class="page-item disabled"><span class="page-link">...</span></li>
        {% endif %}

        {% for i in total_pages_list %}
            {% if i >= current_page|add:-3 and i <= current_page|add:3 %}
                <li class="page-item {% if i == current_page %}active{% endif %}">
                    <a class="page-link" href="?{{ query_string }}&page={{ i }}">{{ i }}</a>
                </li>
            {% endif %}
        {% endfor %}

        {% if current_page < total_pages|add:-3 %}
            <li class="page-item disabled"><span class="page-link">...</span></li>
        {% endif %}

        {% if current_page < total_pages %}
        <!-- "Next" Button (">") -->
            <li class="page-item">
                <a class="page-link" href="?{{ query_string }}&page={{ current_page|add:1 }}">></a>
            </li>

        <!-- "Last" Button (">>") -->
            <li class="page-item">
                <a class="page-link" href="?{{ query_string }}&page={{ total_pages }}">>></a>
            </li>
        {% endif %}
        {% endwith %}
    </ul>
</nav>
